<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Código de Barras</title>
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.0/dist/JsBarcode.all.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }
        textarea {
            width: 80%;
            height: 100px;
            margin-bottom: 10px;
        }
        .barcode-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        .barcode {
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>Gerador de Código de Barras</h1>
    <textarea id="serials" placeholder="Digite os seriais, um por linha..."></textarea><br>
    <button onclick="generateBarcodes()">Gerar Códigos de Barras</button>
    <button onclick="generatePDF()">Baixar PDF</button>
    <div class="barcode-container" id="barcodeContainer"></div>
    
    <script>
        function generateBarcodes() {
            const serials = document.getElementById("serials").value.split("\n").map(s => s.trim()).filter(s => s);
            const container = document.getElementById("barcodeContainer");
            container.innerHTML = "";
            
            serials.forEach(serial => {
                const div = document.createElement("div");
                div.classList.add("barcode");
                
                const svg = document.createElement("svg");
                svg.id = "barcode-" + serial;
                
                const label = document.createElement("p");
                label.textContent = serial;
                
                div.appendChild(svg);
                div.appendChild(label);
                container.appendChild(div);
                
                JsBarcode(svg, serial, { format: "CODE128", displayValue: false });
            });
        }

        function generatePDF() {
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF();
            const serials = document.getElementById("serials").value.split("\n").map(s => s.trim()).filter(s => s);
            let y = 10;
            
            serials.forEach((serial, index) => {
                const canvas = document.createElement("canvas");
                JsBarcode(canvas, serial, { format: "CODE128", displayValue: true });
                const imgData = canvas.toDataURL("image/png");
                
                pdf.addImage(imgData, "PNG", 10, y, 80, 20);
                y += 30;
                
                if (y > 270 && index < serials.length - 1) {
                    pdf.addPage();
                    y = 10;
                }
            });
            
            pdf.save("codigos_de_barras.pdf");
        }
    </script>
</body>
</html>
